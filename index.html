<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>SaveMySpot – Live Map</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9/dist/leaflet.css"/>
  <style>
    html,body{margin:0;padding:0;height:100%}
    #map{width:100%;height:100%}
  </style>
</head>
<body>
  <div id="map"></div>
  <script src="https://unpkg.com/leaflet@1.9/dist/leaflet.js"></script>
  <script>
    // 1. centre on Beirut (change lat/lng to your city)
    const map = L.map('map').setView([33.895, 35.511], 15);

    // 2. free live tiles (no token)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '© OpenStreetMap'
    }).addTo(map);

    // 3. LOAD existing pins (from pins.json in same repo)
    fetch('pins.json')
      .then(r => r.json())
      .then(arr => arr.forEach(p => L.marker([p.lat, p.lng], {color: 'green'}).addTo(map)));

    // 4. SCOUT: long-press (right-click) → drop pin + save
    map.on('contextmenu', e => {
      const lat = e.latlng.lat, lng = e.latlng.lng;
      L.marker([lat, lng], {color: 'green'}).addTo(map);
      // quick save: open bot chat with data pre-filled
      window.open(`https://t.me/savemyspotmainbot?start=${lat},${lng}`, '_blank');
      alert('Pin dropped – finish inside the bot chat!');
    });
  </script>
</body>
</html>
